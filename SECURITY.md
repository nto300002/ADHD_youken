# セキュリティポリシー

## サポートバージョン

以下のバージョンに対してセキュリティアップデートを提供しています。

| バージョン | サポート状況 |
|----------|------------|
| 1.x (最新) | :white_check_mark: サポート中 |
| < 1.0 | :x: サポート終了 |

## 脆弱性の報告

セキュリティ脆弱性を発見した場合は、**公開のIssueを作成せず**、以下の方法で報告してください。

### 推奨: GitHub Security Advisories

1. リポジトリの **[Security](../../security)** タブを開く
2. **"Report a vulnerability"** をクリック
3. 脆弱性の詳細を記入して送信

### Email

公開範囲を限定したい場合は、以下のメールアドレスにご連絡ください：

- **Email**: security@example.com（※実際のプロジェクトでは実在するアドレスに変更してください）

### 報告に含めるべき情報

脆弱性の迅速な対応のため、以下の情報を含めてください：

- 脆弱性の種類（XSS、SQLインジェクション、CSRF など）
- 影響を受けるコンポーネント・ファイル
- 再現手順（可能であれば PoC コード）
- 影響範囲と深刻度の評価
- 推奨される修正方法（あれば）

## 対応プロセス

報告された脆弱性は以下のプロセスで対応します：

### 1. 受領確認（24時間以内）
- 報告から24時間以内に受領確認を返信
- 担当者をアサイン

### 2. 調査・検証（48時間以内）
- 48時間以内に脆弱性の検証を開始
- 影響範囲と深刻度を評価
- CVSS スコアを算出

### 3. 修正対応
脆弱性の深刻度に応じた対応時間：

| 深刻度 | 対応時間 |
|-------|---------|
| Critical | 3日以内にパッチリリース |
| High | 1週間以内にパッチリリース |
| Medium | 2週間以内にパッチリリース |
| Low | 次回マイナーバージョンに含める |

### 4. 公開
- 修正完了後、適切なタイミングで脆弱性情報を公開
- CVE番号の取得（必要に応じて）
- セキュリティアドバイザリの発行

## セキュリティベストプラクティス

このプロジェクトでは以下のセキュリティ対策を実施しています：

### 依存関係管理
- ✅ **Dependabot**: 週次で依存関係を自動チェック・更新
- ✅ **npm audit**: CI/CDで脆弱性スキャン実行
- ✅ **Snyk**: 詳細な脆弱性分析（週次）
- ✅ **Dependency Review**: PR時に新規依存関係を検証

### コードセキュリティ
- ✅ **CodeQL Analysis**: 静的コード解析
- ✅ **ESLint**: セキュリティルールを有効化
- ✅ **TypeScript**: 型安全性による脆弱性低減

### 認証・認可
- ✅ **JWT**: トークンベース認証
- ✅ **OAuth 2.0**: GitHub OAuth統合
- ✅ **access_token暗号化**: DB保存時に暗号化

### 攻撃対策
- ✅ **XSS対策**: 入力サニタイズ・出力エスケープ
- ✅ **CSRF対策**: トークン検証
- ✅ **SQLインジェクション対策**: パラメータバインディング
- ✅ **レートリミット**: API乱用防止

### インフラストラクチャ
- ✅ **HTTPS強制**: 全通信を暗号化
- ✅ **セキュアヘッダー**: CSP、X-Frame-Options等
- ✅ **環境変数管理**: 機密情報をGitHub Secretsで管理

## 環境変数のセキュリティ

本番環境では以下の環境変数を適切に管理してください（**絶対にGitにコミットしない**）：

- `JWT_SECRET`: 32文字以上のランダム文字列
- `GITHUB_CLIENT_SECRET`: GitHub OAuth シークレット
- `WEBHOOK_SECRET`: GitHub Webhook 検証用
- `ENCRYPTION_KEY`: access_token暗号化用（32バイト）
- `CLOUDFLARE_API_TOKEN`: デプロイ用トークン

## セキュリティ更新の通知

セキュリティアップデートを受け取るには：

1. このリポジトリを **Watch** → **Custom** → **Security alerts** にチェック
2. GitHub Security Advisories を購読

## 謝辞

セキュリティ脆弱性の報告者には以下の形で感謝を表明します：

- セキュリティアドバイザリに報告者名を記載（希望者のみ）
- SECURITY.md の Contributors セクションに掲載（希望者のみ）

## 連絡先

セキュリティに関する一般的な質問は：
- **GitHub Discussions**: [Security カテゴリ](../../discussions/categories/security)

---

**最終更新**: 2026-02-14
